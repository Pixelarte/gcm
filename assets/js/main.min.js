function init() {
    console.info("followMe @PixelarteCl"), initServiceWorker();
}

function initServiceWorker() {
    function a() {
        return "showNotification" in ServiceWorkerRegistration.prototype ? "denied" === Notification.permission ? void console.warn("The user has blocked notifications.") : "PushManager" in window ? void navigator.serviceWorker.ready.then(function(a) {
            reg = a, console.log(a), a.pushManager.getSubscription().then(function(a) {
                console.log(a), a && sendSubscriptionToServer(a);
            })["catch"](function(a) {
                console.warn("Error during getSubscription()", a);
            });
        }) : void console.warn("Push messaging isn't supported.") : void console.warn("Notifications aren't supported.");
    }
    "serviceWorker" in navigator ? (console.info("Service Worker is supported"), navigator.serviceWorker.register("/gcm/serviceWorker/sw.min.js").then(a)) : console.warn("Service workers aren't supported in this browser.");
}

function initButtonSubscribe() {
    $("#subscribe").show(), $("#subscribe").on("click", function(a) {
        a.preventDefault();
    });
}

function registro() {
    endpoint = sub.endpoint.slice(sub.endpoint.indexOf("send/") + 5, sub.endpoint.length), 
    $.ajax({
        url: "php/registro.php",
        data: {
            campos: {
                endpoints: endpoint,
                dispositivo: dispositivo,
                num: num
            }
        },
        type: "POST",
        dataType: "json",
        success: function(a) {
            console.log(a.result), "ok" == a.result;
        }
    });
}

var reg, sub, isSubscribed = !1, endpoint;

window.onload = init;